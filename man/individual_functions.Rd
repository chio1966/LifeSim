% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/individual-functions.R
\name{individual_functions}
\alias{individual_functions}
\title{Create Individual Hazard Function Objects}
\usage{
individual_functions(lst)
}
\arguments{
\item{lst}{A list containing \code{times} and \code{rates}, typically the output from \code{rate_extraction()}.}
}
\value{
A list where each element is a list of three functions (\code{h}, \code{H}, and \code{Hinv}) for each individual:
\itemize{
\item \code{h}: the hazard function over time.
\item \code{H}: the cumulative hazard function.
\item \code{Hinv}: the inverse cumulative hazard function (for sampling survival times).
}
}
\description{
This function generates a list of hazard (\code{h}), cumulative hazard (\code{H}), and inverse cumulative hazard (\code{Hinv})
functions for each individual, based on piecewise constant rates over specified intervals.
}
\examples{
library(survival)
library(lubridate)
library(dplyr)
# Generate example input data
set.seed(123)
n <- 200
start_date <- as.Date("1970-01-01") + runif(n, 0, as.numeric(as.Date("1972-12-31") - as.Date("1970-01-01")))
end_date <- as.Date("1985-01-01") + runif(n, 0, as.numeric(as.Date("1986-12-31") - as.Date("1985-01-01")))
age <- runif(n, 40, 70)
sex <- sample(c("male", "female"), n, replace = TRUE)
ethnicity <- sample(c("white", "black"), n, replace = TRUE)

test_df <- data.frame(
  start_date = start_date,
  end_date = end_date,
  age = age,
  sex = sex,
  ethnicity = ethnicity
)

mapping <- c("age" = "age", "year" = "year", "sex" = "sex", "ethnicity" = "race")

# Extract lifetable times and rates
rates_out <- rate_extraction(test_df, ratetable = survexp.usr, mapping = mapping,
                              start = "start_date", end = "end_date",
                              rate_scale = 365.25, time_scale = 1/365.25)

# Simulate survival times based on extracted rates
result <- lifetable_sim(n = 1, lst = rates_out, seed = 42)
str(result)
}
